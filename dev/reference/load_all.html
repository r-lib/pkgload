<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Load complete package — load_all • pkgload</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Load complete package — load_all"><meta name="description" content="load_all() loads a package. It roughly simulates what happens
when a package is installed and loaded with library(), without
having to first install the package. It:
Loads all data files in data/. See load_data() for more
details.
Sources all R files in the R directory, storing results in
environment that behaves like a regular package namespace. See
load_code() for more details.
Adds a shim from system.file() to shim_system.file() in
the imports environment of the package. This ensures that system.file()
works with both development and installed packages despite their differing
directory structures.
Adds shims from help() and ? to shim_help() and shim_question()
to make it easier to preview development documentation.
Compiles any C, C++, or Fortran code in the src/ directory and
connects the generated DLL into R. See pkgbuild::compile_dll()
for more details.
Loads any compiled translations in inst/po.
Runs .onAttach(), .onLoad() and .onUnload() functions at
the correct times.
If you use testthat, will load all test helpers so you can
access them interactively. devtools sets the DEVTOOLS_LOAD
environment variable to the package name to let you check whether the
helpers are run during package loading.


is_loading() returns TRUE when it is called while load_all()
is running. This may be useful e.g. in .onLoad hooks.
A package loaded with load_all() can be identified with with
is_dev_package()."><meta property="og:description" content="load_all() loads a package. It roughly simulates what happens
when a package is installed and loaded with library(), without
having to first install the package. It:
Loads all data files in data/. See load_data() for more
details.
Sources all R files in the R directory, storing results in
environment that behaves like a regular package namespace. See
load_code() for more details.
Adds a shim from system.file() to shim_system.file() in
the imports environment of the package. This ensures that system.file()
works with both development and installed packages despite their differing
directory structures.
Adds shims from help() and ? to shim_help() and shim_question()
to make it easier to preview development documentation.
Compiles any C, C++, or Fortran code in the src/ directory and
connects the generated DLL into R. See pkgbuild::compile_dll()
for more details.
Loads any compiled translations in inst/po.
Runs .onAttach(), .onLoad() and .onUnload() functions at
the correct times.
If you use testthat, will load all test helpers so you can
access them interactively. devtools sets the DEVTOOLS_LOAD
environment variable to the package name to let you check whether the
helpers are run during package loading.


is_loading() returns TRUE when it is called while load_all()
is running. This may be useful e.g. in .onLoad hooks.
A package loaded with load_all() can be identified with with
is_dev_package()."><meta name="robots" content="noindex"><script defer data-domain="pkgload.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pkgload</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.4.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/pkgload/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Load complete package</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/pkgload/blob/main/R/load.R" class="external-link"><code>R/load.R</code></a></small>
      <div class="d-none name"><code>load_all.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>load_all()</code> loads a package. It roughly simulates what happens
when a package is installed and loaded with <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>, without
having to first install the package. It:</p><ul><li><p>Loads all data files in <code>data/</code>. See <code><a href="load_data.html">load_data()</a></code> for more
details.</p></li>
<li><p>Sources all R files in the R directory, storing results in
environment that behaves like a regular package namespace. See
<code><a href="load_code.html">load_code()</a></code> for more details.</p></li>
<li><p>Adds a shim from <code><a href="system.file.html">system.file()</a></code> to <code><a href="system.file.html">shim_system.file()</a></code> in
the imports environment of the package. This ensures that <code><a href="system.file.html">system.file()</a></code>
works with both development and installed packages despite their differing
directory structures.</p></li>
<li><p>Adds shims from <code><a href="help.html">help()</a></code> and <code>?</code> to <code><a href="help.html">shim_help()</a></code> and <code><a href="help.html">shim_question()</a></code>
to make it easier to preview development documentation.</p></li>
<li><p>Compiles any C, C++, or Fortran code in the <code>src/</code> directory and
connects the generated DLL into R. See <code><a href="https://pkgbuild.r-lib.org/reference/compile_dll.html" class="external-link">pkgbuild::compile_dll()</a></code>
for more details.</p></li>
<li><p>Loads any compiled translations in <code>inst/po</code>.</p></li>
<li><p>Runs <code>.onAttach()</code>, <code>.onLoad()</code> and <code>.onUnload()</code> functions at
the correct times.</p></li>
<li><p>If you use <span class="pkg">testthat</span>, will load all test helpers so you can
access them interactively. devtools sets the <code>DEVTOOLS_LOAD</code>
environment variable to the package name to let you check whether the
helpers are run during package loading.</p></li>
</ul><p><code>is_loading()</code> returns <code>TRUE</code> when it is called while <code>load_all()</code>
is running. This may be useful e.g. in <code>.onLoad</code> hooks.
A package loaded with <code>load_all()</code> can be identified with with
<code><a href="is_dev_package.html">is_dev_package()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">load_all</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  reset <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compile <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  attach <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  export_all <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  export_imports <span class="op">=</span> <span class="va">export_all</span>,</span>
<span>  helpers <span class="op">=</span> <span class="va">export_all</span>,</span>
<span>  attach_testthat <span class="op">=</span> <span class="fu">uses_testthat</span><span class="op">(</span><span class="va">path</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  recompile <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  warn_conflicts <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is_loading</span><span class="op">(</span>pkg <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Path to a package, or within a package.</p></dd>


<dt id="arg-reset">reset<a class="anchor" aria-label="anchor" href="#arg-reset"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> This is no longer supported
because preserving the namespace requires unlocking its environment, which
is no longer possible in recent versions of R.</p></dd>


<dt id="arg-compile">compile<a class="anchor" aria-label="anchor" href="#arg-compile"></a></dt>
<dd><p>If <code>TRUE</code> always recompiles the package; if <code>NA</code>
recompiles if needed (as determined by <code><a href="https://pkgbuild.r-lib.org/reference/needs_compile.html" class="external-link">pkgbuild::needs_compile()</a></code>);
if <code>FALSE</code>, never recompiles.</p></dd>


<dt id="arg-attach">attach<a class="anchor" aria-label="anchor" href="#arg-attach"></a></dt>
<dd><p>Whether to attach a package environment to the search
path. If <code>FALSE</code> <code>load_all()</code> behaves like <code><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">loadNamespace()</a></code>. If
<code>TRUE</code> (the default), it behaves like <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>. If <code>FALSE</code>,
the <code>export_all</code>, <code>export_imports</code>, and <code>helpers</code> arguments have
no effect.</p></dd>


<dt id="arg-export-all">export_all<a class="anchor" aria-label="anchor" href="#arg-export-all"></a></dt>
<dd><p>If <code>TRUE</code> (the default), export all objects.
If <code>FALSE</code>, export only the objects that are listed as exports
in the NAMESPACE file.</p></dd>


<dt id="arg-export-imports">export_imports<a class="anchor" aria-label="anchor" href="#arg-export-imports"></a></dt>
<dd><p>If <code>TRUE</code> (the default), export all objects that are
imported by the package. If <code>FALSE</code> export only objects defined in the
package.</p></dd>


<dt id="arg-helpers">helpers<a class="anchor" aria-label="anchor" href="#arg-helpers"></a></dt>
<dd><p>if <code>TRUE</code> loads <span class="pkg">testthat</span> test helpers.</p></dd>


<dt id="arg-attach-testthat">attach_testthat<a class="anchor" aria-label="anchor" href="#arg-attach-testthat"></a></dt>
<dd><p>If <code>TRUE</code>, attach <span class="pkg">testthat</span> to the search path,
which more closely mimics the environment within test files.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>if <code>TRUE</code> suppresses output from this function.</p></dd>


<dt id="arg-recompile">recompile<a class="anchor" aria-label="anchor" href="#arg-recompile"></a></dt>
<dd><p>DEPRECATED. force a recompile of DLL from source code, if
present. This is equivalent to running <code><a href="https://pkgbuild.r-lib.org/reference/clean_dll.html" class="external-link">pkgbuild::clean_dll()</a></code> before
<code>load_all()</code></p></dd>


<dt id="arg-warn-conflicts">warn_conflicts<a class="anchor" aria-label="anchor" href="#arg-warn-conflicts"></a></dt>
<dd><p>If <code>TRUE</code>, issues a warning if a function in the global
environment masks a function in the package. This can happen when you
accidentally source a <code>.R</code> file, rather than using <code>load_all()</code>, or if you
define a function directly in the R console. This is frustrating to debug,
as it feels like the changes you make to the package source aren't having
the expected effect.</p></dd>


<dt id="arg-pkg">pkg<a class="anchor" aria-label="anchor" href="#arg-pkg"></a></dt>
<dd><p>If supplied, <code>is_loading()</code> only returns <code>TRUE</code> if the
package being loaded is <code>pkg</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="differences-to-regular-loading">Differences to regular loading<a class="anchor" aria-label="anchor" href="#differences-to-regular-loading"></a></h2>
    <p><code>load_all()</code> tries its best to reproduce the behaviour of
<code><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">loadNamespace()</a></code> and <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>. However it deviates from normal
package loading in several ways.</p><ul><li><p><code>load_all()</code> doesn't install the package to a library, so <code><a href="system.file.html">system.file()</a></code>
doesn't work. pkgload fixes this for the package itself installing a shim,
<code><a href="system.file.html">shim_system.file()</a></code>. However, this shim is not visible to third party
packages, so they will fail if they attempt to find files within your
package. One potential workaround is to use <code><a href="https://fs.r-lib.org/reference/path_package.html" class="external-link">fs::path_package()</a></code>
instead of <code><a href="system.file.html">system.file()</a></code>, since that understands the mechanisms that
devtools uses to load packages.</p></li>
<li><p><code>load_all()</code> loads all packages referenced in <code>Imports</code> at load time,
but <code><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">loadNamespace()</a></code> and <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> only load package dependencies as
they are needed.</p></li>
<li><p><code>load_all()</code> copies all objects (not just the ones listed as exports)
into the package environment. This is useful during development because
it makes internal objects easy to access.  To export only the objects
listed as exports, use <code>export_all = FALSE</code>. This more closely simulates
behavior when loading an installed package with <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>, and can
be useful for checking for missing exports.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="controlling-the-debug-compiler-flags">Controlling the debug compiler flags<a class="anchor" aria-label="anchor" href="#controlling-the-debug-compiler-flags"></a></h2>
    <p><code>load_all()</code> delegates to <code><a href="https://pkgbuild.r-lib.org/reference/compile_dll.html" class="external-link">pkgbuild::compile_dll()</a></code> to perform the actual
compilation, during which by default some debug compiler flags are
appended. If you would like to produce an optimized build instead,
you can opt out by setting the <code>pkg.build_extra_flags</code>
option or the <code>PKG_BUILD_EXTRA_FLAGS</code> environment variable to <code>FALSE</code>.
For further details see the Details section in <code><a href="https://pkgbuild.r-lib.org/reference/compile_dll.html" class="external-link">pkgbuild::compile_dll()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Load the package in the current directory</span></span></span>
<span class="r-in"><span><span class="fu">load_all</span><span class="op">(</span><span class="st">"./"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Running again loads changed files</span></span></span>
<span class="r-in"><span><span class="fu">load_all</span><span class="op">(</span><span class="st">"./"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With export_all=FALSE, only objects listed as exports in NAMESPACE</span></span></span>
<span class="r-in"><span><span class="co"># are exported</span></span></span>
<span class="r-in"><span><span class="fu">load_all</span><span class="op">(</span><span class="st">"./"</span>, export_all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/wch" class="external-link">Winston Chang</a>, <a href="https://www.jimhester.com/" class="external-link">Jim Hester</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

